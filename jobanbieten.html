<script>
    document.addEventListener('DOMContentLoaded', () => {
        const form = document.getElementById('helpForm');
        form.addEventListener('submit', async (e) => {
            e.preventDefault();

            const formData = {
                title: form.title.value,
                location: form.location.value,
                duration: form.duration.value,
                urgency: form.urgency.value,
                payment: form.payment.value,
                description: form.description.value,
                created_at: new Date().toISOString()
            };

            const { data, error } = await supabase.from('mini_jobs').insert([formData]);

            if (error) {
                document.getElementById('errorMessage').style.display = 'block';
                document.getElementById('successMessage').style.display = 'none';
            } else {
                document.getElementById('successMessage').style.display = 'block';
                document.getElementById('errorMessage').style.display = 'none';
                form.reset();
            }
        });
    });
</script>
