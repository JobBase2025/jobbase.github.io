<!-- nav.html -->
<header>
  <div class="container">
    <div class="logo">
      <a href="index.html"><img src="/image.png" alt="JobConnect Logo" style="height: 40px;"></a>
    </div>
    <nav>
      <ul>
        <li><a href="index.html" class="nav-link">Startseite</a></li>
        <li><a href="jobsuche.html" class="nav-link">Jobs finden</a></li>
        <li><a href="jobanbieten.html" class="nav-link">Job anbieten</a></li>
        <li><a href="#">Über uns</a></li>
      </ul>
    </nav>
    <div class="auth-buttons" id="auth-area">
      <!-- Wird dynamisch durch JS ersetzt -->
    </div>
  </div>
</header>

<script src="https://unpkg.com/@supabase/supabase-js@2"></script>
<script>
  const SUPABASE_URL = "https://ytcrvruzmqjehnoaffda.supabase.co";
  const SUPABASE_KEY = "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...";
  const supabase = window.supabase.createClient(SUPABASE_URL, SUPABASE_KEY);

  function renderAuthButtons(user) {
    const authArea = document.getElementById("auth-area");
    if (!authArea) return;

    if (user) {
      authArea.innerHTML = `
        <span id="user-email">${user.email}</span>
        <a href="profil.html"><button class="btn">Profil</button></a>
        <a href="favoriten.html"><button class="btn">Favoriten</button></a>
        <button class="btn btn-small" onclick="logout()">Abmelden</button>
      `;
    } else {
      authArea.innerHTML = `
        <a href="anmelden.html"><button class="btn">Anmelden</button></a>
        <a href="anmelden.html#register"><button class="btn btn-primary">Registrieren</button></a>
      `;
    }
  }

  async function logout() {
    await supabase.auth.signOut();
    window.location.href = "index.html";
  }

  // Beim Laden prüfen, ob Benutzer angemeldet ist
  supabase.auth.getUser().then(({ data: { user } }) => {
    renderAuthButtons(user);
  });
</script>
